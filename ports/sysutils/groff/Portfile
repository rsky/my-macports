# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                groff
conflicts           mdocml
version             1.22.3
categories          sysutils textproc
platforms           darwin
maintainers         nomaintainer
license             GPL-3+
installs_libs       no

description         GNU Troff (Groff)

long_description    The groff (GNU Troff) software is a typesetting package \
                    which reads plain text mixed with formatting commands and \
                    produces formatted output. Groff now supports HTML.

homepage            http://www.gnu.org/software/groff/
master_sites        gnu

checksums           rmd160  8f6d364f759e559c12c497091118f6d68f3a3b85 \
                    sha256  3a48a9d6c97750bfbd535feeb5be0111db6406ddb7bb79fc680809cda6d828a5

patchfiles          patch-Makefile.in.diff

configure.args      --infodir=${prefix}/share/info \
                    --mandir=${prefix}/share/man \
                    --with-libiconv-prefix=${prefix} \
                    --with-awk=${prefix}/bin/gawk \
                    --without-gs \
                    --without-x

depends_build       port:texinfo
depends_lib-append  port:libiconv
depends_run-append  port:gawk

build.env-append    LC_CTYPE=C
destroot.env-append LC_CTYPE=C

post-destroot {
    delete ${destroot}${prefix}/lib/charset.alias
}

variant ghostscript description {Support Ghostscript} {
    configure.args-replace  --without-gs --with-gs=${prefix}/bin/gs
    depends_lib-append  port:ghostscript \
                        port:psutils \
                        port:netpbm
}
