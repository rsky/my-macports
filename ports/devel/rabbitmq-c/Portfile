# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem      1.0
PortGroup       cmake 1.0

name            rabbitmq-c
version         0.4.1
revision        0
license         MIT
maintainers     openmaintainer
platforms       darwin

set git_user    alanxz
set git_hash    56d2b6b

description     RabbitMQ C client
long_description \
   This is a C-language AMQP client library for use \
   with AMQP servers speaking protocol versions 0-9-1.

homepage        http://alanxz.github.io/rabbitmq-c/
master_sites    https://github.com/alanxz/${git_user}/${name}/download/v${version}/

worksrcdir      ${git_user}-${name}-${git_hash}

checksums \
    rmd160  8d07052cea304de3d41f9a93470fd217200e5b57 \
    sha256  88358b2f5cc66717bfc498ee4f1519594a33dc5901162899e22ec4f05db1b4d6

configure.args  -DBUILD_STATIC_LIBS:BOOL=ON \
                -DBUILD_TOOLS:BOOL=OFF \
                -DBUILD_TOOLS_DOCS:BOOL=OFF

variant tools description {Install RabbitMQ C Client Tools} {
    configure.args-delete   -DBUILD_TOOLS:BOOL=OFF
    #                        -DBUILD_TOOLS_DOCS:BOOL=OFF
    configure.args-append   -DBUILD_TOOLS:BOOL=ON
    #                        -DBUILD_TOOLS_DOCS:BOOL=ON
    #depends_build-append    port:xmlto
    depends_lib-append      port:popt
}

livecheck.type  regex
livecheck.url   https://github.com/${git_user}/rabbitmq-c/releases
livecheck.regex {/releases/.*?([0-9]+\.[0-9.]+)\"}
