# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem      1.0
PortGroup       cmake 1.0

name            rabbitmq-c
version         0.3.0
revision        0
license         MIT
maintainers     openmaintainer
platforms       darwin

set git_user    alanxz

description     RabbitMQ C client
long_description \
   This is a C-language AMQP client library for use \
   with AMQP servers speaking protocol versions 0-9-1.

homepage        http://alanxz.github.io/rabbitmq-c/
master_sites    https://github.com/${git_user}/${name}/archive/

distname        ${name}-v${version}
worksrcdir      ${name}-${name}-v${version}

checksums \
    rmd160  e6c3d134026d9e20fd82012386571e06422e1e89 \
    sha256  7e7d8dde073d0861f6d8e5ad6381c1ff45fb004c5b22affe0e15c88348876e68

configure.args  -DBUILD_STATIC_LIBS:BOOL=ON \
                -DBUILD_TOOLS:BOOL=OFF \
                -DBUILD_TOOLS_DOCS:BOOL=OFF

variant tools description {Install RabbitMQ C Client Tools} {
    configure.args-delete   -DBUILD_TOOLS:BOOL=OFF
    #                        -DBUILD_TOOLS_DOCS:BOOL=OFF
    configure.args-append   -DBUILD_TOOLS:BOOL=ON
    #                        -DBUILD_TOOLS_DOCS:BOOL=ON
    #depends_build-append    port:xmlto
    depends_lib-append      port:popt
}

livecheck.type  regex
livecheck.url   https://github.com/${git_user}/rabbitmq-c/releases
livecheck.regex {/releases/.*?([0-9]+\.[0-9.]+)\"}
