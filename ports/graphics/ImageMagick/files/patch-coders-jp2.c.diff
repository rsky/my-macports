--- ImageMagick-6.8.8-2/coders/jp2.c.org	2014-01-06 01:59:30.000000000 +0900
+++ ImageMagick-6.8.8-2/coders/jp2.c	2014-01-25 10:17:37.000000000 +0900
@@ -369,7 +369,7 @@
   if (opj_read_header(jp2_stream,jp2_codec,&jp2_image) == 0)
     {
       opj_stream_set_user_data(jp2_stream,NULL);
-      opj_stream_destroy_v3(jp2_stream);
+      opj_stream_destroy(jp2_stream);
       opj_destroy_codec(jp2_codec);
       ThrowReaderException(DelegateError,"UnableToDecodeImageFile");
     }
@@ -384,7 +384,7 @@
       if (jp2_status == 0)
         {
           opj_stream_set_user_data(jp2_stream,NULL);
-          opj_stream_destroy_v3(jp2_stream);
+          opj_stream_destroy(jp2_stream);
           opj_destroy_codec(jp2_codec);
           opj_image_destroy(jp2_image);
           ThrowReaderException(DelegateError,"UnableToDecodeImageFile");
@@ -402,13 +402,13 @@
   if (jp2_status == 0)
     {
       opj_stream_set_user_data(jp2_stream,NULL);
-      opj_stream_destroy_v3(jp2_stream);
+      opj_stream_destroy(jp2_stream);
       opj_destroy_codec(jp2_codec);
       opj_image_destroy(jp2_image);
       ThrowReaderException(DelegateError,"UnableToDecodeImageFile");
     }
   opj_stream_set_user_data(jp2_stream,NULL);
-  opj_stream_destroy_v3(jp2_stream);
+  opj_stream_destroy(jp2_stream);
   for (i=0; i < (ssize_t) jp2_image->numcomps; i++)
   {
     if ((jp2_image->comps[i].dx == 0) || (jp2_image->comps[i].dy == 0))
@@ -1057,7 +1057,7 @@
       (opj_end_compress(jp2_codec,jp2_stream) == 0))
     {
       opj_stream_set_user_data(jp2_stream,NULL);
-      opj_stream_destroy_v3(jp2_stream);
+      opj_stream_destroy(jp2_stream);
       opj_destroy_codec(jp2_codec);
       opj_image_destroy(jp2_image);
       ThrowWriterException(DelegateError,"UnableToEncodeImageFile");
@@ -1066,7 +1066,7 @@
     Free resources.
   */
   opj_stream_set_user_data(jp2_stream,NULL);
-  opj_stream_destroy_v3(jp2_stream);
+  opj_stream_destroy(jp2_stream);
   opj_destroy_codec(jp2_codec);
   opj_image_destroy(jp2_image);
   (void) CloseBlob(image);
