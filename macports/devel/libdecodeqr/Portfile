PortSystem      1.0

name            libdecodeqr
version         0.9.3
revision        0
license         BSD
maintainers     openmaintainer
platforms       darwin

description     a C/C++ library for decoding QR code based on JIS X 0510 and ISO/IEC18004.
long_description \
    "libdecodeqr" is a C/C++ library for decoding QR code based on JIS X 0510 and ISO/IEC18004. \
    This library is able to decode various image formats whether it's taken from a file, webcam, \
    scanner, or any other image formats available.

use_bzip2       yes

homepage        http://trac.koka-in.org/libdecodeqr
master_sites    http://trac.koka-in.org/libdecodeqr/attachment/wiki/WikiStart/${distfiles}?format=raw&dummy=

checksums \
    md5    9b3cf86fcb76d18eda7f6bc20b20eb35 \
    rmd160 293a2896b4d36f6fb31f3ec1bcc39399ed3a775e \
    sha256 bdfddd798d3be4670d80587322720e4342576e0ed7702e2b136ee582995f4dc8

worksrcdir      ${distname}/src

patchfiles      patch-libdecodeqr-Makefile.in.diff \
                patch-sample-simple-Makefile.in.diff \
                patch-sample-webcam-Makefile.in.diff

patch.pre_args  -p0

depends_lib     port:opencv-less

use_parallel_build  no

configure.compiler          llvm-gcc-4.2
configure.cppflags-append   -I${prefix}/include/opencv
configure.ldflags-append    -lopencv_core

configure.args  --with-cv=opencv_highgui  --with-highgui=opencv_highgui

destroot {
    xinstall -m 0755 -W ${worksrcpath}/libdecodeqr \
        libdecodeqr.${version}.dylib libdecodeqr.a \
        ${destroot}${prefix}/lib
    ln -sf libdecodeqr.${version}.dylib ${destroot}${prefix}/lib/libdecodeqr.dylib
    xinstall -m 0755 -d ${destroot}${prefix}/include/libdecodeqr
    xinstall -m 0644 -W ${worksrcpath}/libdecodeqr \
         decodeqr.h qrerror.h qrtypes.h \
         ${destroot}${prefix}/include/libdecodeqr
}

livecheck.type  regex
livecheck.url   ${homepage}
livecheck.regex {/libdecodeqr-([0-9]+\.[0-9.]+)\.tar\.}

# -*-
# coding: utf-8
# mode: tcl
# tab-width: 4
# indent-tabs-mode: nil
# c-basic-offset: 4
# -*-
# vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
