PortSystem      1.0
PortGroup       python 1.0

name            py-pillow
version         1.7.8
categories-append   graphics
license         MIT
maintainers     openmaintainer

description     Python Imaging Library (fork)
long_description \
   Pillow is the "friendly" PIL fork. PIL is the Python Imaging Library. \
   Pillow was started for and is currently maintained by the Plone community. \
   But it is used by many other folks in the Python web community, \
   and probably elsewhere too.

homepage        http://pypi.python.org/pypi/Pillow/
master_sites    http://pypi.python.org/packages/source/P/Pillow/
dist_subdir     python
distname        Pillow-${version}
use_zip         yes
checksums \
    md5    41d8688d4db72673069a6dc63b5289d6 \
    rmd160 e52cec02d943951a80d30b32b1764cb3ae87b283 \
    sha256 907f5342b1df1d277dcc10df2aeabc61099e5a07e0676b9fcd1bb7379890c0ee

python.default_version 27
python.versions 24 25 26 27 31 32 33

if {$subport != $name} {
    conflicts               py${python.version}-pil
    patchfiles-append       patch-setup.py
    depends_build-append    port:py${python.version}-distribute
    depends_lib-append      port:freetype \
                            port:jpeg \
                            port:lcms \
                            port:tiff \
                            port:zlib

    livecheck.type  none
} else {
    livecheck.type  regex
    livecheck.url   ${homepage}
    livecheck.regex {Pillow ([0-9.]+)}
}

set docdestroot ${destroot}${prefix}/share/doc/${subport}

post-patch {
    reinplace "s|__PREFIX__|${prefix}|g" ${worksrcpath}/setup.py
}

variant doc description {Install documentation} {
    post-destroot {
        xinstall -d -m 0755 ${docdestroot}
        foreach f [glob ${worksrcpath}/doc/*.css] {
            file copy ${f} ${docdestroot}
        }
        foreach f [glob ${worksrcpath}/doc/*.html] {
            file copy ${f} ${docdestroot}
        }
        foreach f [glob ${worksrcpath}/doc/*.rst] {
            file copy ${f} ${docdestroot}
        }
    }
}

# Local variables:
# coding: utf-8
# mode: tcl
# tab-width: 4
# indent-tabs-mode: nil
# c-basic-offset: 4
# End:
# vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
