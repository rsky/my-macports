PortSystem      1.0

name            opt-php-fpm
version         1.0

license         Public Domain
maintainers     openmaintainer
supported_archs noarch

description     PHP FPM Startup Item
long_description \
    The startup item of PHP FastCGI Process Manager installed to /opt/php/main

homepage        http://www.php.net/manual/en/install.fpm.php

fetch           {}
checksum        {}
extract         {}
use_configure   no
build           {}
destroot        {}

set php_prefix          /opt/php/main
startupitem.create      yes
startupitem.name        ${name}

subport opt-php53-fpm {
    set php_prefix      /opt/php/5.3
    startupitem.name    ${subport}
}

subport opt-php54-fpm {
    set php_prefix      /opt/php/5.4
    startupitem.name    ${subport}
}

set php_fpm_bin ${php_prefix}/sbin/php-fpm
set fpm_config  ${php_prefix}/etc/php-fpm.conf
set fpm_pidfile ${php_prefix}/var/run/php-fpm.pid
set fpm_logfile ${php_prefix}/var/log/php-fpm.log

startupitem.pidfile     auto ${fpm_pidfile}
#startupitem.logfile    ${fpm_logfile}
startupitem.executable  ${php_fpm_bin} --fpm-config=${fpm_config} --pid=${fpm_pidfile} --daemonize

# Local Variables:
# coding: utf-8
# mode: tcl
# tab-width: 4
# indent-tabs-mode: nil
# c-basic-offset: 4
# End:
# vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
